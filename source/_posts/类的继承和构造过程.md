---
title: 类的继承和构造过程
categories: Swift入门
tags: [Swift]
---

类里面的所有存储型属性——包括所有继承自父类的属性——都必须在构造中设置初始值。

Swift 提供了两种类型的类构造器来确保所有类实例中存储属性都能获得初始值，它们分别是指定构造器和遍历构造器。

<!-- more -->

### 指定构造器和便利构造器
指定构造器是类中最主要的构造器。一个指定构造器将初始化类中提供的所有属性，并根据父类链往上调用父类的构造器来实现父类的初始化。

每一个类都必须拥有至少一个指定构造器。在某些情况下，许多类通过继承了父类中的指定构造器而满足了这个条件。

便利构造器是类中比较次要的、辅助型的构造器。可以定义便利构造器来调用同一个类中的指定构造器，并为其参数提供默认值。也可以定义便利构造器来创建一个特殊用途或特定输入的实例。

应当只在必要的时候为类提供便利构造器，比方说某种情况下通过使用便利构造器来快捷调用某个指定构造器，能够节省更多开发时间并让类的构造过程更加清晰明了。

构造器：

```swift
init(parameters) { ... }
```

便利构造器：

```swift
convenience init(parameters) { ... }
```

### 类的构造器代理规则
为了简化指定构造器和便利构造器之间的调用关系，Swift 采用一下三条规则来限制构造器之间的代理调用：

1. 指定构造器必须调用其直接父类的指定构造器。
2. 便利构造器必须调用同意类中定义的其它构造器。
3. 便利构造器必须最终以调用一个指定构造器结束。

更方便的记忆是：

* 指定构造器必须总是向上代理
* 便利构造器必须总是横向代理

![构造器代理图](https://pic1.imgdb.cn/item/635bb52816f2c2beb142af2d.jpg)